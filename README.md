# 航空航天微系统需求定义与验证平台

## 项目简介

这是一个专门用于航空航天微系统需求分析的平台。通过自然语言输入描述微系统的功能和特性，平台能够自动提取关键器件需求，并从器件库中补充完整的硬件配置，最终生成详细的技术分析报告。

## 主要功能

- **自然语言需求解析**: 从用户描述中自动提取微系统需求和器件信息
- **器件库匹配**: 基于需求自动从器件库选择合适的硬件器件
- **需求分析**: 自动分析任务需求和器件配置的匹配程度
- **报告生成**: 生成详细的需求分析和器件配置报告

## 项目结构

```
├── main.py                           # 主程序入口
├── core/                             # 核心功能模块
│   ├── traditional_mode_processor.py # 传统模式处理器
│   └── ai_integration/
│       └── deepseek_api_client.py    # DeepSeek API客户端
├── device_library.json               # 器件库
├── 任务需求.json                     # 生成的任务需求
├── 当前器件.json                     # 生成的器件配置
└── 传统模式分析报告.md               # 生成的分析报告
```

## 安装和使用

### 环境要求

- Python 3.8+
- DeepSeek API密钥

### 安装依赖

```bash
pip install -r config/requirements.txt
```

### 使用示例

#### 1. 使用 DeepSeek API 模式 (推荐)

需要提供 API Key 并指定模型为 `deepseek-api`：

```bash
python3 main.py --mode traditional \
  --model deepseek-api \
  --api-key "sk-6546cb10ad4344d9b2e4cc9dba7b96fa" \
  --input "这款应用于深空探测的微型系统，高度集成于探测器机械臂末端，能够自主执行对天体表面的'接触-采样-原位分析'任务：它先以微型刷扫装置清除目标点浮尘，再驱动微型压电钻头破碎岩石，并利用气体流将颗粒样本送入内置分析舱，最终通过微型光谱仪实时解析其物质成分。该系统的卓越能力源于其精密的MEMS器件，包括用于物质识别的微型激光拉曼探头与高光谱成像仪、执行动作的压电钻头与MEMS气体泵阀、负责控制与数据处理的抗辐射片上系统（SoC），所有这些单元均通过三维异构集成技术封装在一个轻巧坚固的陶瓷基框架内"
```

#### 2. 使用本地模型模式 (默认)

默认使用 `qwen0.5b` 模型，无需 API Key：

```bash
python3 main.py --mode traditional \
  --input "这款应用于深空探测的微型系统..."
```

### 输出文件

程序执行完成后会生成以下文件：

- **任务需求.json**: 解析的任务需求详情，包括各类器件的需求参数
- **当前器件.json**: 推荐的完整器件配置，包括提取器件和补充器件
- **传统模式分析报告.md**: 详细的技术分析报告，包含匹配度评估和优化建议
 - **器件排布图.svg**: PCB 风格的二维器件排布，展示关键器件与代表连线
 - **传统模式分析可视化.html**: 图形化页面（类别匹配度、器件表与排布图）

## 工作流程

1. **自然语言解析**: 提取用户描述中的微系统功能和器件信息
2. **需求生成**: 分析并生成结构化的任务需求
3. **器件选择**: 从库中选择合适的器件进行配置补充
4. **匹配分析**: 评估器件配置与需求的匹配程度
5. **报告生成**: 生成包含选择理由和优化建议的分析报告
6. **可视化输出**: 自动生成数据驱动的 HTML 页面与 PCB 风格排布图

## 开发脚本说明

- `scripts/build_visualization.py`：汇总最新报告与当前器件数据，生成图表+表格+嵌入排布的 HTML 页面
- `scripts/generate_device_layout_svg.py`：基于当前器件与器件库生成紧凑布局的 PCB 风格 SVG 拓扑


